import{_ as B}from"./Button.vue_vue_type_script_setup_true_lang-DLbVc8FY.js";import{_ as L}from"./Switch.vue_vue_type_script_setup_true_lang-C7ZMvNjL.js";import{_ as N,a as T}from"./Alert.vue_vue_type_script_setup_true_lang-BJzj-emV.js";import{_ as U}from"./AlertDescription.vue_vue_type_script_setup_true_lang-WVxL5Kx8.js";import{T as V,q as H,Q as f,o as u,c as P,w as n,u as r,f as w,a as t,b as a,d as p,n as z,e as b,x as C,N as D}from"./app-DKvfoN-y.js";import{_ as E}from"./InstallerLayout-BZOiPsjO.js";import{i as q}from"./useThemeConfig-CMn459mP.js";import"./index-T_RycVZ9.js";import"./Link-BxabHujp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={key:0,class:"flex flex-col"},j={class:"grid gap-4 mt-5"},I={class:"mb-3 flex gap-3"},K={key:1,class:"flex flex-col"},M={class:"grid gap-4 mt-5"},ne={__name:"Upgrade",setup(Q){var y,g,x;const s=V({upgrade_confirmation:!1}),_=H(!1),v=(y=f().props)==null?void 0:y.api_url,S=(g=f().props)==null?void 0:g.api_key,h=(x=f().props)==null?void 0:x.license_key;async function O(l,e,i,m){const c=new Headers;c.append("Content-Type","application/x-www-form-urlencoded");const o=new URLSearchParams;o.append("api_key",e),o.append("license_key",i),o.append("identifier",m);const d={method:"POST",headers:c,body:o,redirect:"follow"};try{return await(await fetch(l+"verify",d)).json()}catch{console.log("ðŸ’© SOS-SOS-HELP - What are you doing here, are you fucking crazy?")}}const $=async()=>{try{const l=await O(v,S,h,window.location.hostname),{response:{code:e,message:i}}=l;[100,101,102,103,210].includes(e)&&C.warning(i,{theme:q.value?"dark":"light"}),e===150&&D.get(route("installer.index")),e===200&&(_.value=!0)}catch{console.log("ðŸ’© SOS-SOS-HELP - What are you doing here, are you fucking crazy?")}},A=async()=>{s.post(route("installer.upgrade.store"))};return(l,e)=>{const i=N,m=U,c=T,o=L,d=B;return u(),P(E,null,{default:n(()=>[r(_)?(u(),w("div",W,[e[5]||(e[5]=t("h1",{class:"text-left sm:text-center text-base sm:text-xl font-semibold"},"Upgrade",-1)),t("form",{onSubmit:b(A,["prevent"])},[t("div",j,[a(c,null,{default:n(()=>[a(i,null,{default:n(()=>e[1]||(e[1]=[p("Attention")])),_:1}),a(m,null,{default:n(()=>e[2]||(e[2]=[p("Some data will be lost during the upgrade")])),_:1})]),_:1}),t("div",I,[a(o,{checked:r(s).upgrade_confirmation,"onUpdate:checked":e[0]||(e[0]=k=>r(s).upgrade_confirmation=k)},null,8,["checked"]),e[3]||(e[3]=t("div",{class:"font-medium text-sm text-foreground"},"I confirm upgrade to Alma v3",-1))]),a(d,{type:"submit",class:z({"opacity-25":r(s).processing}),disabled:r(s).processing||!r(s).isDirty},{default:n(()=>e[4]||(e[4]=[p(" Upgrade ")])),_:1},8,["class","disabled"])])],32)])):(u(),w("div",K,[e[7]||(e[7]=t("h1",{class:"text-left sm:text-center text-base sm:text-xl font-semibold"},"Verify your license",-1)),t("form",{onSubmit:b($,["prevent"])},[t("div",M,[a(d,{type:"submit"},{default:n(()=>e[6]||(e[6]=[p(" Verify ")])),_:1})])],32)]))]),_:1})}}};export{ne as default};
