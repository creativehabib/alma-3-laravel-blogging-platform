import{_ as J,a as K,b as X,M as te}from"./moon-stars-linear-DuqhdEj6.js";import{b as Y,f as W,g as oe,h as re,c as se,u as ne}from"./AppLayout-CDEtE47D.js";import{_ as le,I as ae,a as ie}from"./eye-linear-CH3le6Xu.js";import{j as C,o as t,f as c,a as o,c as d,w as s,b as r,u as n,t as i,g as y,Q as U,e as D,n as q,N as I,q as A,T as ce,d as f,A as ee,i as E,F as B,h as ue,r as de,s as me}from"./app-DKvfoN-y.js";import{_ as G}from"./Link-BxabHujp.js";import{I as fe,l as _e,f as Z,g as ye,_ as he,a as ge,b as pe,c as ve,d as be,e as ke}from"./heart-fill-up0978Eg.js";import{_ as xe,a as we,b as $e,c as ze,d as De,e as Ce,f as Se}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DN79s5No.js";import{_ as Me}from"./AlertDialogAction.vue_vue_type_script_setup_true_lang-bWlvk4rB.js";import{_ as Ae,a as je,b as Be,c as Ie,d as Le,e as Ve,f as Fe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DcDK8ukt.js";import{_ as Ne}from"./Button.vue_vue_type_script_setup_true_lang-DLbVc8FY.js";import{_ as Re}from"./GTextarea-BoCYYrbh.js";import{_ as Pe}from"./InputError-BbPAIupT.js";import{Z as Te}from"./index-T_RycVZ9.js";import{I as He,u as Oe}from"./flag-2-linear-_iuNYGiW.js";import{d as Ee,c as Ue}from"./useThemeConfig-CMn459mP.js";const qe={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function Ge(e,a){return t(),c("svg",qe,a[0]||(a[0]=[o("path",{fill:"currentColor",d:"m229.66 109.66l-48 48a8 8 0 0 1-11.32-11.32L204.69 112H128a88.1 88.1 0 0 0-88 88a8 8 0 0 1-16 0A104.11 104.11 0 0 1 128 96h76.69l-34.35-34.34a8 8 0 0 1 11.32-11.32l48 48a8 8 0 0 1 0 11.32"},null,-1)]))}const We=C({name:"ph-arrow-bend-up-right",render:Ge}),Ze={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"};function Qe(e,a){return t(),c("svg",Ze,a[0]||(a[0]=[o("path",{fill:"currentColor",d:"M224 48v48a8 8 0 0 1-8 8h-48a8 8 0 0 1-5.66-13.66L180.65 72a79.48 79.48 0 0 0-54.72-22.09h-.45a79.52 79.52 0 0 0-55.89 22.8a8 8 0 0 1-11.18-11.44A96 96 0 0 1 192 60.7l18.36-18.36A8 8 0 0 1 224 48m-37.59 135.29a80 80 0 0 1-111.06.71l18.31-18.31A8 8 0 0 0 88 152H40a8 8 0 0 0-8 8v48a8 8 0 0 0 13.66 5.66L64 195.3a95.42 95.42 0 0 0 66 26.76h.53a95.36 95.36 0 0 0 67.07-27.33a8 8 0 0 0-11.18-11.44Z"},null,-1)]))}const Je=C({name:"ph-arrows-clockwise-fill",render:Qe}),Ke={class:"h-7 w-7 flex items-center justify-center group-hover:bg-primary/5 dark:group-hover:bg-primary/10 rounded-full"},Xe={class:"flex items-center gap-1.5 w-full cursor-pointer"},Ye={__name:"Share",props:{story:Object},setup(e){return(a,h)=>{const u=J,_=le,m=Y,v=K,l=X;return t(),d(l,{modal:!1},{default:s(()=>[r(u,{class:"group"},{default:s(()=>[o("div",Ke,[r(n(We),{class:"h-5 w-5 group-hover:text-primary text-foreground"})])]),_:1}),r(v,{align:"center"},{default:s(()=>[r(_,{story:e.story.slug},null,8,["story"]),e.story.isPublished?(t(),d(m,{key:0,href:a.route("story.repost.create",e.story)},{default:s(()=>[o("div",Xe,[r(n(Je),{class:"h-4 w-4"}),o("span",null,i(a.__("Repost")),1)])]),_:1},8,["href"])):y("",!0)]),_:1})]),_:1})}}},et={class:"flex items-center justify-between"},tt=["disabled"],ot={class:"w-7 h-7 flex items-center justify-center group-hover:bg-primary/10 rounded-full"},rt={class:"w-7 h-7 flex items-center justify-center group-hover:bg-primary/10 rounded-full"},st={key:0,class:"pl-0.5 text-sm group-hover:text-primary dark:text-foreground"},nt={__name:"Favorite",props:{story:Object},setup(e){const a=(u,_)=>{I.post(route("story.utils.favorite"),{story_id:u.id,user_id:_.id},{preserveScroll:!0})},h=U().props.auth.user;return(u,_)=>{const m=G;return t(),c("div",et,[n(h)?(t(),c("button",{key:0,type:"button",class:"group flex items-center",disabled:!e.story.isPublished,onClick:_[0]||(_[0]=D(v=>a(e.story,n(h)),["prevent"]))},[o("div",ot,[e.story.isSavedBy?(t(),d(n(fe),{key:1,class:"w-5 h-5 text-primary"})):(t(),d(n(W),{key:0,class:"w-5 h-5 group-hover:text-primary dark:text-foreground"}))]),e.story.favoriters_count>0?(t(),c("span",{key:0,class:q(["pl-0.5 text-sm",e.story.isSavedBy?"text-primary":"dark:text-foreground group-hover:text-primary"])},i(e.story.favoriters_count),3)):y("",!0)],8,tt)):(t(),d(m,{key:1,href:u.route("login"),class:"group flex items-center"},{default:s(()=>[o("div",rt,[r(n(W),{class:"w-5 h-5 group-hover:text-primary dark:text-foreground"})]),e.story.favoriters_count>0?(t(),c("span",st,i(e.story.favoriters_count),1)):y("",!0)]),_:1},8,["href"]))])}}},lt={class:"flex items-center justify-between"},at=["disabled"],it={class:"flex h-7 w-7 items-center justify-center rounded-full group-hover:bg-like group-hover:bg-opacity-10"},ct={class:"flex h-7 w-7 items-center justify-center rounded-full group-hover:bg-like group-hover:bg-opacity-10"},ut={key:0,class:"pl-0.5 text-sm group-hover:text-like"},dt={__name:"Like",props:{story:Object},setup(e){const a=_e.debounce((u,_)=>{I.post(route("story.utils.liked"),{story_id:u.id,user_id:_.id},{preserveScroll:!0})},500),h=U().props.auth.user;return(u,_)=>{const m=G;return t(),c("div",lt,[n(h)?(t(),c("button",{key:0,type:"button",class:"group flex items-center","aria-label":"like",disabled:!e.story.isPublished,onClick:_[0]||(_[0]=D(v=>n(a)(e.story,n(h)),["prevent"]))},[o("div",it,[e.story.isLikedBy?(t(),d(n(ye),{key:1,class:"h-5 w-5 text-like group-hover:text-like dark:text-like"})):(t(),d(n(Z),{key:0,class:"h-5 w-5 group-hover:text-like text-foreground"}))]),e.story.likers_count>0?(t(),c("span",{key:0,class:q(["text-sm group-hover:text-like pl-0.5",e.story.isLikedBy?"text-like":""])},i(e.story.likers_count),3)):y("",!0)],8,at)):(t(),d(m,{key:1,href:u.route("login"),class:"group group flex items-center","aria-label":"like"},{default:s(()=>[o("div",ct,[r(n(Z),{class:"h-5 w-5 group-hover:text-like text-foreground"})]),e.story.likers_count>0?(t(),c("span",ut,i(e.story.likers_count),1)):y("",!0)]),_:1},8,["href"]))])}}},mt={class:"relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:cursor-pointer hover:bg-accent focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"},ft={class:"flex flex-col py-4 gap-4"},_t={__name:"ReportStoryForm",props:{story:Object},setup(e){const a=e,{visible:h,hideDialog:u}=Oe(),_=A(h),m=ce({story_id:a.story.id,reason:"",message:""}),v=()=>{m.post(route("report.story"),{onSuccess:()=>{u(),m.reset()}})};return(l,b)=>{const k=Ae,g=je,x=Be,S=Te,M=Ie,$=he,z=ge,p=pe,L=ve,V=be,F=ke,N=Pe,R=Re,P=Ne,T=Le,H=Ve,O=Fe;return t(),d(O,{open:n(_),"onUpdate:open":b[2]||(b[2]=w=>ee(_)?_.value=w:null)},{default:s(()=>[r(k,{"as-child":""},{default:s(()=>[o("div",mt,[r(n(He),{class:"mr-2 h-4 w-4"}),o("span",null,i(l.__("Report")),1)])]),_:1}),r(H,{class:"sm:max-w-md"},{default:s(()=>[o("form",{onSubmit:D(v,["prevent"])},[r(M,null,{default:s(()=>[r(g,null,{default:s(()=>[f(i(l.__("Report")),1)]),_:1}),r(S,{asChild:""},{default:s(()=>[r(x)]),_:1})]),_:1}),o("div",ft,[o("div",null,[r(F,{modelValue:n(m).reason,"onUpdate:modelValue":b[0]||(b[0]=w=>n(m).reason=w)},{default:s(()=>[r(z,null,{default:s(()=>[r($,{placeholder:l.__("Ð¡hoose a reason")},null,8,["placeholder"])]),_:1}),r(V,null,{default:s(()=>[r(L,null,{default:s(()=>[r(p,{value:"spam"},{default:s(()=>[f(i(l.__("Spam")),1)]),_:1}),r(p,{value:"abuse"},{default:s(()=>[f(i(l.__("Abuse")),1)]),_:1}),r(p,{value:"Harassment"},{default:s(()=>[f(i(l.__("Harassment")),1)]),_:1}),r(p,{value:"Law violation"},{default:s(()=>[f(i(l.__("Law violation")),1)]),_:1}),r(p,{value:"Sexual content"},{default:s(()=>[f(i(l.__("Sexual content")),1)]),_:1}),r(p,{value:"Copyright issue"},{default:s(()=>[f(i(l.__("Copyright issue")),1)]),_:1}),r(p,{value:"Other"},{default:s(()=>[f(i(l.__("Other")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(N,{class:"mt-1",message:n(m).errors.reason},null,8,["message"])]),o("div",null,[r(R,{modelValue:n(m).message,"onUpdate:modelValue":b[1]||(b[1]=w=>n(m).message=w),id:"message",rows:5,errorMessage:n(m).errors.message,label:l.__("Message")},null,8,["modelValue","errorMessage","label"])])]),r(T,null,{default:s(()=>[r(P,{type:"submit",disabled:n(m).processing||!n(m).isDirty},{default:s(()=>[f(i(l.__("Submit")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])}}},yt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ht(e,a){return t(),c("svg",yt,a[0]||(a[0]=[o("g",{fill:"none",stroke:"currentColor","stroke-width":"1.5"},[o("path",{"stroke-linecap":"round",d:"M20.5 6h-17m15.333 2.5l-.46 6.9c-.177 2.654-.265 3.981-1.13 4.79s-2.196.81-4.856.81h-.774c-2.66 0-3.991 0-4.856-.81c-.865-.809-.954-2.136-1.13-4.79l-.46-6.9"}),o("path",{d:"M6.5 6h.11a2 2 0 0 0 1.83-1.32l.034-.103l.097-.291c.083-.249.125-.373.18-.479a1.5 1.5 0 0 1 1.094-.788C9.962 3 10.093 3 10.355 3h3.29c.262 0 .393 0 .51.019a1.5 1.5 0 0 1 1.094.788c.055.106.097.23.18.479l.097.291A2 2 0 0 0 17.5 6"})],-1)]))}const Q=C({name:"solar-trash-bin-2-linear",render:ht}),gt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function pt(e,a){return t(),c("svg",gt,a[0]||(a[0]=[o("path",{fill:"currentColor",d:"m15.99 4.95l.53-.53zm3.082 3.086l-.531.53zM8.738 19.429l-.53.53zm-4.116-4.12l.53-.53zm12.945-.315l-.264-.702zm-1.917.72l.264.703zM8.332 8.383l-.704-.258zm.695-1.896l.704.258zm-3.182 4.188l.2.723zm1.457-.539l-.439-.609zm.374-.345l.57.487zm6.575 6.59l.491.568zm-.87 1.821l-.724-.199zm.536-1.454l-.61-.438zM2.718 12.755l-.75.005zm.212-.803l-.65-.374zm8.375 9.391l.001-.75zm.788-.208l-.371-.652zm-.396-19.099l.162.732zM1.47 21.47a.75.75 0 0 0 1.062 1.06zm5.715-3.598a.75.75 0 0 0-1.061-1.06zM15.459 5.48l3.082 3.086l1.061-1.06L16.52 4.42zM9.269 18.9l-4.117-4.12l-1.06 1.06l4.116 4.12zm8.034-4.607l-1.917.72l.528 1.405l1.917-.72zM9.036 8.64l.695-1.896l-1.409-.516l-.694 1.896zm-2.992 2.756c.712-.196 1.253-.334 1.696-.652l-.877-1.218c-.172.125-.397.198-1.217.424zm1.584-3.272c-.293.8-.385 1.018-.523 1.18l1.142.973c.353-.415.535-.944.79-1.637zm.112 2.62q.281-.203.507-.467l-1.142-.973a1.4 1.4 0 0 1-.242.222zm7.646 4.268c-.689.26-1.214.445-1.626.801l.982 1.135c.16-.14.377-.233 1.172-.531zM14.104 18.4c.225-.819.298-1.043.422-1.216l-1.219-.875c-.317.443-.454.983-.65 1.693zm-.344-2.586q-.256.22-.453.495l1.22.875q.093-.132.215-.236zm-8.608-1.036c-.646-.647-1.084-1.087-1.368-1.444c-.286-.359-.315-.514-.316-.583l-1.5.009c.004.582.293 1.07.642 1.508c.35.44.861.95 1.481 1.57zm.494-4.828c-.846.234-1.542.424-2.063.634c-.52.208-1.012.49-1.302.994l1.3.748c.034-.06.136-.18.56-.35s1.022-.337 1.903-.58zm-2.178 2.8a.84.84 0 0 1 .112-.424l-1.3-.748a2.34 2.34 0 0 0-.312 1.182zm4.74 7.21c.624.624 1.137 1.139 1.578 1.49c.441.352.932.642 1.518.643l.002-1.5c-.07 0-.225-.029-.585-.316c-.36-.286-.802-.727-1.452-1.378zm4.45-1.958c-.245.888-.412 1.49-.583 1.917c-.172.428-.293.53-.353.564l.743 1.303c.509-.29.792-.786 1.002-1.309c.21-.524.402-1.225.637-2.077zm-1.354 4.091c.407 0 .807-.105 1.161-.307l-.743-1.303a.84.84 0 0 1-.416.11zm7.237-13.527c1.064 1.064 1.8 1.803 2.25 2.413c.444.598.495.917.441 1.167l1.466.317c.19-.878-.16-1.647-.701-2.377c-.534-.72-1.366-1.551-2.395-2.58zm-.71 7.13c1.361-.511 2.463-.923 3.246-1.358c.795-.44 1.431-.996 1.621-1.875l-1.466-.317c-.054.25-.232.52-.883.88c-.663.369-1.638.737-3.046 1.266zM16.52 4.42c-1.036-1.037-1.872-1.876-2.595-2.414c-.734-.544-1.508-.897-2.39-.702l.324 1.464c.25-.055.569-.005 1.171.443c.613.455 1.358 1.197 2.429 2.27zM9.73 6.744c.522-1.423.886-2.41 1.251-3.08c.36-.66.628-.84.878-.896l-.323-1.464c-.882.194-1.435.84-1.872 1.642c-.431.792-.837 1.906-1.342 3.282zM2.53 22.53l4.654-4.658l-1.061-1.06l-4.654 4.658z"},null,-1)]))}const vt=C({name:"solar-pin-linear",render:pt});function bt(){const e=A(!1),a=A(!1),h=A({}),u=v=>{h.value=v,a.value=!0};async function _(v,l){e.value=!0;try{await v(),e.value=!1,m(),l&&l.onSuccess&&l.onSuccess()}catch(b){console.log(b),e.value=!1,l&&l.onError&&l.onError()}}const m=()=>{a.value=!1};return{loading:e,propsAlertDialog:h,showAlertDialog:a,openAlertDialog:u,performAction:_,closeAlertDialog:m}}const kt={class:"w-8 h-8 flex items-center justify-center group-hover:bg-muted dark:group-hover:bg-muted rounded-full base-transition"},xt={__name:"CardMenuMore",props:{story:Object},setup(e){const a=e,{propsAlertDialog:h,showAlertDialog:u,openAlertDialog:_,performAction:m,closeAlertDialog:v}=bt(),l=async g=>{await m(()=>I.delete(route("story.destroy",g),{preserveState:!0,preserveScroll:!0}))},b=g=>{I.post(route("story.utils.pinned"),{story_id:g.id},{preserveScroll:!0,preserveState:!0})},k=E(()=>a.story.user_can.pin&&a.story.isPublished);return(g,x)=>{const S=J,M=_t,$=re,z=se,p=Y,L=K,V=X,F=xe,N=we,R=$e,P=ze,T=Me,H=De,O=Ce,w=Se;return t(),c(B,null,[r(V,{modal:!1},{default:s(()=>[r(S,{class:"group flex items-center"},{default:s(()=>[o("div",kt,[r(n(te),{class:"h-5 w-5 text-foreground"})])]),_:1}),r(L,{class:"min-w-[200px]",align:"end"},{default:s(()=>[r(z,null,{default:s(()=>[e.story.user_can.report?(t(),d(M,{key:0,story:e.story},null,8,["story"])):y("",!0),n(k)?(t(),d($,{key:1,icon:n(vt),onClick:x[0]||(x[0]=D(j=>b(a.story),["prevent"]))},{default:s(()=>[f(i(e.story.isPinned?g.__("Unpin from profile"):g.__("Pin to your profile")),1)]),_:1},8,["icon"])):y("",!0)]),_:1}),r(z,null,{default:s(()=>[e.story.user_can.edit?(t(),d(p,{key:0,icon:n(oe),href:g.route("story.edit",e.story)},{default:s(()=>[f(i(g.__("Edit")),1)]),_:1},8,["icon","href"])):y("",!0),e.story.user_can.delete?(t(),d($,{key:1,icon:n(Q),onClick:x[1]||(x[1]=j=>n(_)(e.story)),"left-icon":n(Q)},{default:s(()=>[f(i(g.__("Delete")),1)]),_:1},8,["icon","left-icon"])):y("",!0)]),_:1})]),_:1})]),_:1}),r(w,{open:n(u),"onUpdate:open":x[3]||(x[3]=j=>ee(u)?u.value=j:null)},{default:s(()=>[r(O,null,{default:s(()=>[r(R,null,{default:s(()=>[r(F,null,{default:s(()=>[f(i(g.__("Are you sure?")),1)]),_:1}),r(N,null,{default:s(()=>[f(i(g.__("Do you want to delete this story?")),1)]),_:1})]),_:1}),r(H,null,{default:s(()=>[r(P,{onClick:n(v)},{default:s(()=>[f(i(g.__("Cancel")),1)]),_:1},8,["onClick"]),r(T,{variant:"destructive",onClick:x[2]||(x[2]=D(j=>l(n(h).id),["prevent"]))},{default:s(()=>[f(i(g.__("Delete")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64)}}},wt=Ee("inline-flex items-center rounded-xl border px-2.5 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),$t=ue({__name:"Badge",props:{variant:{},class:{}},setup(e){const a=e;return(h,u)=>(t(),c("div",{class:q(n(Ue)(n(wt)({variant:h.variant}),a.class))},[de(h.$slots,"default")],2))}}),zt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Dt(e,a){return t(),c("svg",zt,a[0]||(a[0]=[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.17 20.89c4.184-.277 7.516-3.657 7.79-7.9c.053-.83.053-1.69 0-2.52c-.274-4.242-3.606-7.62-7.79-7.899a33 33 0 0 0-4.34 0c-4.184.278-7.516 3.657-7.79 7.9a20 20 0 0 0 0 2.52c.1 1.545.783 2.976 1.588 4.184c.467.845.159 1.9-.328 2.823c-.35.665-.526.997-.385 1.237c.14.24.455.248 1.084.263c1.245.03 2.084-.322 2.75-.813c.377-.279.566-.418.696-.434s.387.09.899.3c.46.19.995.307 1.485.34c1.425.094 2.914.094 4.342 0M11.995 12h.01m3.986 0H16m-8 0h.009",color:"currentColor"},null,-1)]))}const Ct=C({name:"hugeicons-message-02",render:Dt}),St={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Mt(e,a){return t(),c("svg",St,a[0]||(a[0]=[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"m9 5l6 7l-6 7"},null,-1)]))}const At=C({name:"solar-alt-arrow-right-linear",render:Mt}),jt={class:"relative block bg-background sm:rounded-lg"},Bt={class:"flex flex-col"},It={class:"block px-4 sm:px-5 pb-2 sm:pb-3 pt-3 sm:pt-5"},Lt={class:"flex items-center justify-between w-full"},Vt={class:"flex items-start w-full gap-3"},Ft={class:"relative h-10"},Nt=["src"],Rt={key:1,src:"/images/default-avatar.png",class:"shrink-0 h-10 bg-muted dark:bg-deeper border border-transparent hover:border-border dark:hover:border-primary transition duration-150 ease-linear rounded-full",alt:"avatar"},Pt=["src"],Tt={class:"flex flex-col"},Ht={class:"flex items-center gap-1"},Ot=["src","alt","title"],Et={key:1,class:"text-sm font-medium text-muted-foreground dark:text-foreground"},Ut={class:"flex items-center gap-x-2"},qt=["time"],Gt={class:"flex items-center gap-2 sm:gap-3"},Wt={class:"relative flex flex-col px-4 sm:px-5 my-1 break-all"},Zt=["href"],Qt={key:0,class:"flex items-center justify-center relative my-2 rounded-xl border border-border"},Jt={class:"w-full max-h-[600px] object-contain rounded-xl",controls:"",preload:"",muted:""},Kt=["src"],Xt={key:1,class:"block relative my-2 rounded-xl"},Yt={class:"relative flex justify-center overflow-hidden rounded-xl"},eo=["src"],to=["src","alt"],oo={key:2,class:"aspect-w-16 aspect-h-9 my-2"},ro=["src"],so={key:3,class:"absolute top-0 right-0 bg-[#0000001a] backdrop-blur-[100px] z-10 w-full h-full flex flex-col items-center justify-center"},no={class:"text-lg font-semibold drop-shadow text-white mb-4"},lo={class:"flex flex-col sm:flex-row gap-4 sm:items-center"},ao={class:"flex items-center justify-between py-3 px-4 sm:px-5"},io={class:"flex items-center gap-5"},co={key:0,class:"group flex items-center"},uo={class:"w-7 h-7 flex items-center justify-center group-hover:bg-primary/10 rounded-full"},mo={class:"pl-0.5 text-sm group-hover:text-primary text-foreground"},fo={class:"grow"},_o={key:0,class:"flex items-center gap-3"},yo={key:0,class:"flex-shrink-0"},ho={class:"w-auto h-7 flex items-center justify-center -space-x-2"},go=["title","src"],po={class:"flex items-center gap-1 text-sm font-medium text-foreground group-hover:text-primary base-transition"},vo={key:1,class:"flex items-center gap-3"},bo={class:"w-7 h-7 flex items-center justify-center group-hover:bg-primary/10 rounded-full base-transition"},ko={class:"text-sm font-medium text-foreground group-hover:text-primary base-transition"},No={__name:"FeedCard",props:{story:Object},setup(e){const a=e,{nFormatter:h}=ne(),u=U().props.auth.user,_=A(u.preference_settings==null?a.story.isNSFW:!!(a.story.isNSFW&&u.preference_settings.blur_nsfw==!0)),m=E(()=>a.story.media_url.url!=null&&_.value===!0),v=E(()=>u.preference_settings==null?!1:!!u.preference_settings.open_posts_new_tab);return(l,b)=>{const k=G,g=$t,x=xt,S=ie,M=dt,$=nt,z=Ye;return t(),c("div",jt,[o("div",Bt,[o("div",It,[o("div",Lt,[o("div",Vt,[o("div",Ft,[e.story.user?(t(),d(k,{key:0,href:l.route("user.show",e.story.user),class:"shrink-0"},{default:s(()=>[o("img",{src:e.story.user.avatar_url,class:"h-10 w-10 bg-muted dark:bg-deeper border border-transparent hover:border-border dark:hover:border-primary transition duration-150 ease-linear rounded-full",alt:"avatar"},null,8,Nt)]),_:1},8,["href"])):(t(),c("img",Rt)),e.story.community?(t(),d(k,{key:2,href:l.route("community.show",e.story.community.slug),class:"shrink-0 h-5 w-5 bg-deeper shadow absolute -bottom-0.5 -right-2 border border-transparent hover:border-border dark:hover:border-primary transition duration-150 ease-linear rounded-full"},{default:s(()=>[o("img",{src:e.story.community.avatar_url,class:"rounded-full h-full w-full object-cover",alt:"community"},null,8,Pt)]),_:1},8,["href"])):y("",!0)]),o("div",Tt,[o("div",Ht,[e.story.user?(t(),c(B,{key:0},[e.story.user.display_name?(t(),d(k,{key:0,href:l.route("user.show",e.story.user),class:"text-sm font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:s(()=>[f(i(e.story.user.display_name),1)]),_:1},8,["href"])):(t(),d(k,{key:1,href:l.route("user.show",e.story.user),class:"text-sm font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:s(()=>[f(i(e.story.user.username),1)]),_:1},8,["href"])),e.story.user.primary_badge?(t(),c("img",{key:2,src:e.story.user.primary_badge.image,alt:e.story.user.primary_badge.name,title:e.story.user.primary_badge.name,class:"h-4 w-4 shrink-0",loading:"lazy"},null,8,Ot)):y("",!0)],64)):(t(),c("div",Et,i(l.__("Account deleted")),1))]),o("div",Ut,[e.story.community?(t(),d(k,{key:0,href:l.route("community.show",e.story.community.slug),class:"text-xs font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:s(()=>[f(i(e.story.community.name),1)]),_:1},8,["href"])):y("",!0),o("span",{class:"text-xs text-endpoint",time:e.story.created_at.datetime},i(e.story.created_at.human),9,qt)])])]),o("div",Gt,[e.story.isPublished?y("",!0):(t(),d(g,{key:0},{default:s(()=>[f(i(l.__("Draft")),1)]),_:1})),n(u)?(t(),d(x,{key:1,story:e.story},null,8,["story"])):y("",!0)])])]),o("div",Wt,[n(v)?(t(),c("a",{key:0,href:l.route("story.show",e.story.slug),target:"_blank",class:"text-lg pb-2 sm:text-xl font-semibold block text-foreground break-words"},i(e.story.title),9,Zt)):(t(),d(k,{key:1,href:l.route("story.show",e.story.slug),class:"text-lg pb-2 sm:text-xl font-semibold block text-foreground break-words"},{default:s(()=>[f(i(e.story.title),1)]),_:1},8,["href"])),o("p",null,i(e.story.first_paragraph),1),e.story.media_url?(t(),c(B,{key:2},[e.story.media_url.type==="video"?(t(),c("div",Qt,[o("video",Jt,[o("source",{src:e.story.media_url.url},null,8,Kt)])])):y("",!0),e.story.media_url.type==="image"?(t(),c("div",Xt,[o("div",Yt,[o("img",{src:e.story.media_url.url,class:"absolute left-0 top-0 w-full h-full blur-2xl",alt:"blur",loading:"lazy"},null,8,eo),o("img",{src:e.story.media_url.url,alt:e.story.title,class:"self-center max-h-[500px] z-0",loading:"lazy"},null,8,to)])])):y("",!0),e.story.media_url.type==="embed"?(t(),c("div",oo,[o("iframe",{src:e.story.media_url.url,class:"rounded-xl",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,ro)])):y("",!0),n(m)?(t(),c("div",so,[o("p",no,i(l.__("Sensitive content")),1),o("div",lo,[o("button",{onClick:b[0]||(b[0]=D(p=>_.value=!1,["prevent"])),class:"bg-background px-4 py-2 rounded-xl border border-border text-background-foreground font-semibold shadow-lg"},i(l.__("Show")),1),n(u)?(t(),d(k,{key:0,href:l.route("user.settings.show",n(u)),"preserve-scroll":"",class:"bg-background px-4 py-2 rounded-xl border border-border text-background-foreground font-semibold shadow-lg"},{default:s(()=>[f(i(l.__("Change settings")),1)]),_:1},8,["href"])):(t(),d(k,{key:1,href:l.route("login"),"preserve-scroll":"",class:"bg-background px-4 py-2 rounded-xl border border-border text-background-foreground font-semibold shadow-lg"},{default:s(()=>[f(i(l.__("Change settings")),1)]),_:1},8,["href"]))])])):y("",!0)],64)):y("",!0)]),e.story.type=="repost"?(t(),d(S,{key:0,story:e.story.original_post,class:"mt-2"},null,8,["story"])):y("",!0),o("div",ao,[o("div",io,[r(M,{story:e.story},null,8,["story"]),r($,{story:e.story},null,8,["story"]),r(z,{story:e.story},null,8,["story"])]),e.story.views_count>0?(t(),c("div",co,[o("div",uo,[r(n(ae),{class:"w-5 h-5 group-hover:text-primary text-foreground"})]),o("span",mo,i(n(h)(e.story.views_count)),1)])):y("",!0)]),r(k,{href:`${l.route("story.show",e.story.slug)}#comments`,class:"group flex border-t border-border items-center py-2 px-4 sm:px-5"},{default:s(()=>[o("div",fo,[e.story.comments_count>0?(t(),c("div",_o,[e.story.participants.length>0?(t(),c("div",yo,[o("div",ho,[(t(!0),c(B,null,me(e.story.participants,p=>(t(),c("img",{class:"w-6 h-6 rounded-full shadow-sm border bg-background dark:bg-deeper border-border object-cover",title:p.username,src:p.avatar_url,key:p.id},null,8,go))),128))])])):y("",!0),o("div",po,[o("span",null,i(e.story.comments_count),1),o("span",null,i(e.story.comments_count===1?l.__("comment"):l.__("comments")),1)])])):(t(),c("div",vo,[o("div",bo,[r(n(Ct),{class:"w-5 h-5 group-hover:text-primary text-foreground base-transition"})]),o("div",ko,i(l.__("Leave a comment")),1)]))]),r(n(At),{class:"w-6 h-6 text-foreground group-hover:text-primary"})]),_:1},8,["href"])])])}}};export{Q as I,No as _,$t as a,xt as b,dt as c,nt as d,Ye as e,Ct as f,bt as u};
