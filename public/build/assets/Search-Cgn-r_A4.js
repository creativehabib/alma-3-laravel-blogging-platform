import{_ as M}from"./FeedCard-DrvwWvFG.js";import{_ as H}from"./CommunityFollow-B4_zeSN5.js";import{_ as G}from"./UserFollow-DU-bCASc.js";import{_ as J}from"./EmptyStateTimeline.vue_vue_type_script_setup_true_lang-CzqLXGHD.js";import{_ as P,a as W,d as X}from"./AppLayout-CDEtE47D.js";import{_ as Y}from"./Link-BxabHujp.js";import{Q as Z,q as p,y as F,N as z,i as L,o,c as h,w as u,a as t,n as w,u as s,b as d,l as ee,z as te,A as re,B as se,f as n,e as oe,g as c,F as v,t as l,s as S,d as y}from"./app-DKvfoN-y.js";import{b as ae,a as ne}from"./useThemeConfig-CMn459mP.js";import{u as le,_ as ie}from"./useSearchHistory-C7xne8ra.js";import{_ as de}from"./isEmpty-CMR0aKk4.js";import{I as ue}from"./moon-stars-linear-DuqhdEj6.js";import{I as ce}from"./arrow-left-linear-CzdGo5D7.js";import"./eye-linear-CH3le6Xu.js";import"./heart-fill-up0978Eg.js";import"./index-T_RycVZ9.js";import"./CheckIcon-BQfYEZkr.js";import"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DN79s5No.js";import"./Button.vue_vue_type_script_setup_true_lang-DLbVc8FY.js";import"./AlertDialogAction.vue_vue_type_script_setup_true_lang-bWlvk4rB.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DcDK8ukt.js";import"./GTextarea-BoCYYrbh.js";import"./InputError-BbPAIupT.js";import"./flag-2-linear-_iuNYGiW.js";import"./ButtonLink.vue_vue_type_script_setup_true_lang-CgLFBnw-.js";import"./card-ui-24-regular-CNjZB9mb.js";import"./facebook-BuDmhaaR.js";import"./Switch.vue_vue_type_script_setup_true_lang-C7ZMvNjL.js";import"./alarm-linear-B0PzHQQx.js";import"./Logo-dKRd1DwS.js";import"./isObjectLike-ClnVNF-J.js";const me={class:"flex flex-col justify-start items-stretch"},fe=["placeholder"],pe={key:0},he={class:"font-medium mb-2 text-base md:text-lg"},_e={class:"flex flex-col gap-4"},ge={class:"flex items-center justify-between w-full"},ve={class:"flex items-start w-full gap-3"},be={class:"relative h-10"},ye=["src"],xe={class:"flex flex-col"},ke={class:"flex items-center gap-1"},we=["src","alt","title"],Se={class:"text-xs text-endpoint flex items-center gap-0.5"},qe={key:1},Ce={class:"font-medium mb-2 text-base md:text-lg"},$e={class:"flex flex-col gap-4"},je={class:"flex items-center justify-between w-full"},Ie={class:"flex items-start w-full gap-3"},Ne={class:"relative h-10"},Ve=["src"],Be={class:"flex flex-col"},Fe={class:"text-xs text-endpoint flex items-center gap-0.5"},ze={key:0,class:"space-y-3"},Le={class:"block my-5"},Re={class:"card-navbar"},Ue={class:"card-content-list"},pt={__name:"Search",props:{users:Object,communities:Object,stories:Object,query:String},setup(x){const m=x,R=Z().props.auth.user,a=p(m.query),_=p(m.users),g=p(m.communities),b=p(!1),{addQuery:U}=le(),q=p(),{focused:C}=ae(q);F(C,()=>{}),F(a,ie(async function(r){if(r!==null)try{a.value.length>2&&(b.value=!0,await z.visit(route("search",{q:a.value}),{preserveScroll:!0,preserveState:!0}),$(a.value),await axios.get(route("search.units",{q:a.value}),de).then(i=>{_.value=i.data.users,g.value=i.data.communities})),b.value=!1}catch{console.log("%s There is a difference between knowing the path & walking the path!","ðŸ˜Ž")}},800));const $=r=>{U(r)},O=()=>{a.value="",z.visit(route("explore"),{preserveScroll:!0})},j=p(null),k=p(!1),{stop:Q}=ne(j,([{isIntersecting:r}])=>{r&&m.stories.links.next!==null&&(k.value=!0,axios.get(m.stories.links.next,{params:{q:a.value}}).then(i=>{m.stories.data.push(...i.data.data),m.stories.links=i.data.links,i.data.links.next||(k.value=!1,Q())}))}),I=L(()=>_.value.length===0&&g.value.length===0),T=L(()=>_.value.length===0&&g.value.length===0&&m.stories.data.length===0);return(r,i)=>{const f=Y,N=W,D=J,E=G,A=H,K=M;return o(),h(P,null,{default:u(()=>{var V,B;return[t("div",me,[t("div",{class:w(["py-3 px-4 md:px-5 flex justify-center gap-2 items-center bg-background border-b border-border rounded-t-lg",s(I)?"border-b-0 rounded-b-lg":""])},[d(f,{href:r.route("explore"),class:"hidden sm:flex group hover:bg-muted p-1 rounded-full"},{default:u(()=>[d(s(ce),{class:"h-6 w-6 text-endpoint group-hover:text-foreground"})]),_:1},8,["href"]),t("div",{class:w(["flex items-center group w-full rounded-xl bg-muted py-1 px-3 base-transition border",s(C)?"bg-transparent  border-primary":"border-transparent"])},[d(s(X),{class:"w-5 h-5 cursor-pointer text-endpoint mr-1","aria-hidden":"true"}),ee(t("input",{ref_key:"searchRef",ref:q,"onUpdate:modelValue":i[0]||(i[0]=e=>re(a)?a.value=e:null),type:"text",placeholder:r.__("Search..."),class:"flex h-9 w-full focus:ring-none !p-0 bg-transparent border-transparent text-sm transition duration-200 ease-linear placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus:ring-offset-0 cleared-input focus:shadow-none disabled:cursor-not-allowed disabled:opacity-50",onKeydown:i[1]||(i[1]=se(e=>$(s(a)),["enter"]))},null,40,fe),[[te,s(a)]]),s(a)?(o(),n("button",{key:0,type:"button",class:"rounded-full",onClick:oe(O,["prevent"])},[d(s(ue),{class:"h-5 w-5 font-bold text-endpoint hover:text-primary"})])):c("",!0)],2)],2),t("div",{class:w(s(I)?"":"grid gap-5 px-5 py-4 bg-background border-b border-border rounded-b-lg")},[s(b)?(o(),h(N,{key:0,"is-loading":s(b),onlyIcon:!0},null,8,["is-loading"])):(o(),n(v,{key:1},[s(T)?(o(),h(D,{key:0,title:r.__("Nothing found")},null,8,["title"])):c("",!0),(V=s(_))!=null&&V.length||(B=s(g))!=null&&B.length?(o(),n(v,{key:1},[s(_).length?(o(),n("div",pe,[t("div",he,l(r.__("Users")),1),t("div",_e,[(o(!0),n(v,null,S(s(_),e=>(o(),n("div",{key:e.id},[t("div",ge,[t("div",ve,[t("div",be,[d(f,{href:r.route("user.show",e),class:"shrink-0"},{default:u(()=>[t("img",{src:e.avatar_url,class:"h-10 bg-background dark:bg-deeper border border-transparent hover:border-border dark:hover:border-primary transition duration-150 ease-linear rounded-full",alt:"avatar"},null,8,ye)]),_:2},1032,["href"])]),t("div",xe,[t("div",ke,[e.display_name?(o(),h(f,{key:0,href:r.route("user.show",e),class:"text-sm font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:u(()=>[y(l(e.display_name),1)]),_:2},1032,["href"])):(o(),h(f,{key:1,href:r.route("user.show",e),class:"text-sm font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:u(()=>[y(l(e.username),1)]),_:2},1032,["href"])),e.primary_badge?(o(),n("img",{key:2,src:e.primary_badge.image,alt:e.primary_badge.name,title:e.primary_badge.name,class:"h-4 w-4 shrink-0",loading:"lazy"},null,8,we)):c("",!0)]),t("div",Se,[t("span",null,l(e.followers_count),1),t("span",null,l(e.followers_count===1?r.__("follower"):r.__("followers")),1)])])]),s(R).id!==e.id?(o(),h(E,{key:0,following:e,size:"badge"},null,8,["following"])):c("",!0)])]))),128))]),d(f,{href:r.route("search.users",{q:s(a)}),class:"mt-4 inline-flex items-center text-primary cursor-pointer hover:text-primary/90 base-transition"},{default:u(()=>[y(l(r.__("View more")),1)]),_:1},8,["href"])])):c("",!0),s(g).length?(o(),n("div",qe,[t("div",Ce,l(r.__("Communities")),1),t("div",$e,[(o(!0),n(v,null,S(s(g),e=>(o(),n("div",{key:e.id},[t("div",je,[t("div",Ie,[t("div",Ne,[d(f,{href:r.route("community.show",e),class:"shrink-0"},{default:u(()=>[t("img",{src:e.avatar_url,class:"h-10 bg-background dark:bg-deeper border border-transparent hover:border-border dark:hover:border-primary transition duration-150 ease-linear rounded-full",alt:"avatar"},null,8,Ve)]),_:2},1032,["href"])]),t("div",Be,[d(f,{href:r.route("community.show",e),class:"text-sm font-medium hover:text-muted-foreground dark:hover:text-foreground/90 dark:text-foreground"},{default:u(()=>[y(l(e.name),1)]),_:2},1032,["href"]),t("div",Fe,[t("span",null,l(e.followers_count),1),t("span",null,l(e.followers_count===1?r.__("member"):r.__("members")),1)])])]),d(A,{following:e,size:"badge"},null,8,["following"])])]))),128))]),d(f,{href:r.route("search.communities",{q:s(a)}),class:"mt-4 inline-flex items-center text-primary cursor-pointer hover:text-primary/90 base-transition"},{default:u(()=>[y(l(r.__("View more")),1)]),_:1},8,["href"])])):c("",!0)],64)):c("",!0)],64))],2)]),s(b)?c("",!0):(o(),n("div",ze,[x.stories.data.length?(o(),n(v,{key:0},[t("div",Le,[t("div",Re,l(r.__("Stories")),1),t("div",Ue,[(o(!0),n(v,null,S(x.stories.data,e=>(o(),h(K,{key:e.id,story:e},null,8,["story"]))),128))])]),d(N,{"is-loading":s(k)},null,8,["is-loading"]),t("div",{ref_key:"last",ref:j,class:"-translate-y-32"},null,512)],64)):c("",!0)]))]}),_:1})}}};export{pt as default};
