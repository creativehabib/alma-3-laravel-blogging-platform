import{_ as K}from"./Link-BxabHujp.js";import{M as Q,_ as W,a as X,b as Y}from"./moon-stars-linear-DuqhdEj6.js";import{I as ee,b as te,c as oe,u as ne}from"./AppLayout-CDEtE47D.js";import{o as u,c as y,w as o,b as e,a as n,u as i,d,t as r,q as w,f as x,g as _,N as S,x as T,n as N}from"./app-DKvfoN-y.js";import{_ as ae}from"./CommunityFollow-B4_zeSN5.js";import{_ as V,a as B,b as O,c as R,d as z,e as H,f as A}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DcDK8ukt.js";import{_ as E}from"./Button.vue_vue_type_script_setup_true_lang-DLbVc8FY.js";import{_ as G}from"./Label.vue_vue_type_script_setup_true_lang-BI4_AY6J.js";import{G as Z,Z as q}from"./index-T_RycVZ9.js";import{I as C,f as P,m as se}from"./style-ClfuqKnK.js";import{i as J}from"./useThemeConfig-CMn459mP.js";const re={class:"w-9 h-9 flex items-center justify-center group-hover:bg-muted dark:group-hover:bg-muted rounded-full base-transition"},ie={__name:"CommunityMenu",props:{community:Object},setup(t){return(p,s)=>{const g=W,c=te,v=oe,b=X,h=Y;return u(),y(h,{modal:!1},{default:o(()=>[e(g,{class:"group flex items-center"},{default:o(()=>[n("div",re,[e(i(Q),{class:"h-5 w-5 text-foreground"})])]),_:1}),e(b,{class:"min-w-40",align:"end"},{default:o(()=>[e(v,null,{default:o(()=>[e(c,{href:p.route("community.settings",t.community),icon:i(ee)},{default:o(()=>[d(r(p.__("Settings")),1)]),_:1},8,["href","icon"])]),_:1})]),_:1})]),_:1})}}},le={class:"absolute w-full h-full mx-auto my-auto opacity-0 inset-0 group-hover:opacity-100 group-hover:bg-black/30 rounded-full cursor-pointer"},ce={class:"grid gap-4"},me={key:0,class:"group"},ue={class:"w-[350px] sm:w-96 mx-auto"},de={__name:"CropperCommunityAvatarModal",props:{community:Object},setup(t){const p=t;let s=w(null),g=w(null),c=w(null);const v=a=>{s.value=a.target.files[0],c.value=URL.createObjectURL(s.value)},b=()=>{const{coordinates:a,canvas:m}=g.value.getResult();if(m){const l=new FormData;l.append("community_id",p.community.id),l.append("image",s.value||""),l.append("height",a.height||""),l.append("width",a.width||""),l.append("left",a.left||"0"),l.append("top",a.top||"0"),S.post(route("community.upload.avatar"),l,{preserveState:!1,onError:f=>{f&&T.error(f.image,{theme:J.value?"dark":"light"})},onSuccess:()=>{h()}})}},h=()=>{c.value=null};return(a,m)=>{const l=V,f=B,$=O,D=q,j=R,I=G,k=E,M=z,U=H,L=A;return u(),y(L,null,{default:o(()=>[e(l,{"as-child":""},{default:o(()=>[n("button",le,[e(i(C),{class:"h-6 w-6 mx-auto text-white"})])]),_:1}),e(U,{class:"sm:max-w-md"},{default:o(()=>[e(j,null,{default:o(()=>[e(f,null,{default:o(()=>[d(r(a.__("Upload")),1)]),_:1}),e(D,{asChild:""},{default:o(()=>[e($)]),_:1})]),_:1}),n("div",ce,[i(c)?_("",!0):(u(),x("div",me,[e(I,{for:"image",class:"flex items-center justify-center border-4 border-dashed border-border font-semibold py-6 rounded-lg group-hover:text-primary w-full cursor-pointer"},{default:o(()=>[e(i(C),{class:"h-5 w-5 !mr-1"}),d(" "+r(a.__("Choose image")),1)]),_:1}),n("input",{type:"file",id:"image",class:"hidden",onChange:v,accept:"image/jpeg, image/png, image/webp"},null,32)])),n("div",ue,[e(i(P),{class:"object-cover",ref_key:"cropper",ref:g,"min-height":200,"min-width":200,"max-height":1200,"max-width":1200,"stencil-component":i(se),src:i(c)},null,8,["stencil-component","src"])])]),i(c)?(u(),y(M,{key:0},{default:o(()=>[e(i(Z),null,{default:o(()=>[e(k,{onClick:m[0]||(m[0]=F=>h()),variant:"secondary",class:"hidden sm:flex"},{default:o(()=>[d(r(a.__("Cancel")),1)]),_:1})]),_:1}),e(k,{type:"button",onClick:m[1]||(m[1]=F=>b())},{default:o(()=>[d(r(a.__("Upload")),1)]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})}}},_e={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center gap-x-1 border border-border shadow-xl text-sm px-2 py-1 text-white backdrop-blur-sm transition-opacity duration-75 ease-linear opacity-0 group-hover:opacity-100 group-hover:bg-black/60 rounded-lg cursor-pointer"},pe={class:"grid gap-4"},fe={key:0,class:"group"},ge={class:"w-[350px] sm:w-[520px] mx-auto"},he={__name:"CropperCommunityCoverModal",props:{community:Object},setup(t){const p=t;let s=w(null),g=w(null),c=w(null);const v=a=>{s.value=a.target.files[0],c.value=URL.createObjectURL(s.value)},b=()=>{const{coordinates:a,canvas:m}=g.value.getResult();if(m){const l=new FormData;l.append("community_id",p.community.id),l.append("image",s.value||""),l.append("height",a.height||""),l.append("width",a.width||""),l.append("left",a.left||"0"),l.append("top",a.top||"0"),S.post(route("community.upload.cover"),l,{preserveState:!1,onError:f=>{f&&T.error(f.image,{theme:J.value?"dark":"light"})},onSuccess:()=>{c.value=null}})}},h=()=>{c.value=null};return(a,m)=>{const l=V,f=B,$=O,D=q,j=R,I=G,k=E,M=z,U=H,L=A;return u(),y(L,null,{default:o(()=>[e(l,{"as-child":""},{default:o(()=>[n("button",_e,[e(i(C),{class:"h-4 w-4 mx-auto shrink-0"}),n("span",null,r(a.__("Change cover")),1)])]),_:1}),e(U,{class:"sm:max-w-xl"},{default:o(()=>[e(j,null,{default:o(()=>[e(f,null,{default:o(()=>[d(r(a.__("Upload")),1)]),_:1}),e(D,{asChild:""},{default:o(()=>[e($)]),_:1})]),_:1}),n("div",pe,[i(c)?_("",!0):(u(),x("div",fe,[e(I,{for:"image",class:"flex items-center justify-center border-4 border-dashed border-border font-semibold py-6 rounded group-hover:text-primary w-full cursor-pointer"},{default:o(()=>[e(i(C),{class:"h-5 w-5 !mr-1"}),d(" "+r(a.__("Choose image")),1)]),_:1}),n("input",{type:"file",id:"image",class:"hidden",onChange:v,accept:"image/jpeg, image/png, image/webp"},null,32)])),n("div",ge,[e(i(P),{class:"object-cover",ref_key:"cropper",ref:g,"stencil-size":{width:1200,height:300},"stencil-props":{handlers:{},movable:!1,resizable:!1},"image-restriction":"stencil",src:i(c)},null,8,["src"])])]),i(c)?(u(),y(M,{key:0},{default:o(()=>[e(i(Z),null,{default:o(()=>[e(k,{onClick:m[0]||(m[0]=F=>h()),variant:"secondary",class:"hidden sm:flex"},{default:o(()=>[d(r(a.__("Cancel")),1)]),_:1})]),_:1}),e(k,{type:"button",onClick:m[1]||(m[1]=F=>b())},{default:o(()=>[d(r(a.__("Upload")),1)]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})}}},ye={class:"bg-background mb-5 sm:rounded-xl"},ve={class:"group relative h-52"},be=["src","alt"],xe={class:"px-4 sm:px-6 pt-4"},we={class:"flex flex-wrap items-start justify-between"},ke={class:"group relative -mt-16 h-28 w-28 rounded-full border-2 border-muted dark:border-deeper"},Ce=["src","alt"],$e={class:"ml-auto flex max-w-[calc(100%-114px)] flex-wrap items-end gap-x-3"},De={class:"mt-2 flex w-full max-w-full items-center"},je={class:"relative flex flex-col gap-2"},Ie={class:"text-lg font-bold uppercase tracking-wider text-foreground sm:text-xl"},Me={class:"flex items-center gap-2 text-sm"},Ue={key:0,class:"flex items-center text-foreground"},Le={class:"font-medium mr-1"},Fe={class:"text-endpoint"},Ne={key:1,class:"flex items-center text-foreground"},Se={class:"font-medium mr-1"},Te={class:"text-endpoint"},Ve={key:2,class:"flex items-center text-foreground"},Be={class:"font-medium mr-1"},Oe={class:"text-endpoint"},Re={key:0,class:"text-foreground line-clamp-2 text-sm"},ze={class:"h-12 mt-2"},He={class:"gap-5 relative flex h-full text-endpoint overflow-auto whitespace-nowrap hide-scrollbar"},Ye={__name:"CommunityPageHeader",props:{community:Object},setup(t){const{nFormatter:p}=ne();return(s,g)=>{var m;const c=he,v=de,b=ae,h=ie,a=K;return u(),x("header",ye,[n("div",ve,[n("img",{src:t.community.cover_url,alt:t.community.name,class:"z-10 h-full w-full object-cover sm:rounded-t-xl",loading:"lazy"},null,8,be),t.community.user_can.edit?(u(),y(c,{key:0,community:t.community},null,8,["community"])):_("",!0)]),n("div",xe,[n("div",we,[n("div",ke,[n("img",{src:t.community.avatar_url,alt:t.community.name,class:"h-full w-full rounded-full bg-background dark:bg-deeper"},null,8,Ce),t.community.user_can.edit?(u(),y(v,{key:0,community:t.community},null,8,["community"])):_("",!0)]),n("div",$e,[e(b,{following:t.community,radius:"xxl"},null,8,["following"]),t.community.user_can.edit?(u(),y(h,{key:0,community:t.community},null,8,["community"])):_("",!0)])]),n("div",De,[n("div",je,[n("h1",Ie,r(t.community.name),1),n("div",Me,[t.community.stories_count>0?(u(),x("div",Ue,[n("span",Le,r(i(p)(t.community.stories_count,1)),1),n("span",Fe,r(s.__("Stories")),1)])):_("",!0),t.community.members_count>0?(u(),x("div",Ne,[n("span",Se,r(i(p)(t.community.members_count,1)),1),n("span",Te,r(s.__("Members")),1)])):_("",!0),t.community.total_views_count>0?(u(),x("div",Ve,[n("span",Be,r(i(p)(t.community.total_views_count,1)),1),n("span",Oe,r(s.__("Views")),1)])):_("",!0)]),t.community.description?(u(),x("p",Re,r((m=t.community)==null?void 0:m.description),1)):_("",!0)])]),n("div",ze,[n("nav",He,[e(a,{href:s.route("community.show",t.community),class:N(["text-sm flex items-center font-medium transition duration-200 ease-linear border-b-2",s.route().current("community.show",t.community)?"text-primary border-primary":"border-transparent hover:text-primary"])},{default:o(()=>[d(r(s.__("Latest")),1)]),_:1},8,["href","class"]),e(a,{href:s.route("community.top",t.community),class:N(["text-sm flex items-center font-medium transition duration-200 ease-linear border-b-2",s.route().current("community.top",t.community)?"text-primary border-primary":"border-transparent hover:text-primary"])},{default:o(()=>[d(r(s.__("Top")),1)]),_:1},8,["href","class"]),e(a,{href:s.route("community.about",t.community),class:N(["text-sm flex items-center font-medium transition duration-200 ease-linear border-b-2",s.route().current("community.about",t.community)?"text-primary border-primary":"border-transparent hover:text-primary"])},{default:o(()=>[d(r(s.__("Info")),1)]),_:1},8,["href","class"])])])])])}}};export{Ye as _};
