import{M as J,_ as K,a as P,b as X}from"./moon-stars-linear-DuqhdEj6.js";import{_ as Y,a as ee,b as ne,c as se,d as oe,e as te,f as le}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DcDK8ukt.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-DLbVc8FY.js";import{_ as ae}from"./GTextarea-BoCYYrbh.js";import{Z as ue}from"./index-T_RycVZ9.js";import{q as I,T as F,o as t,c as b,w as s,b as n,a as p,u as a,f as m,t as o,e as S,d as _,A as T,Q as R,F as j,N,h as re,l as ie,z as de,n as ce,g as A}from"./app-DKvfoN-y.js";import{I as _e,u as me}from"./flag-2-linear-_iuNYGiW.js";import{_ as H,a as O,b as q,c as z,d as E,e as G,f as L}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DN79s5No.js";import{I as Z}from"./forbidden-circle-linear-CL_YQccO.js";import{I as pe,b as fe,c as be}from"./AppLayout-CDEtE47D.js";import{e as ge,c as ke}from"./useThemeConfig-CMn459mP.js";import{_ as ve}from"./InputError-BbPAIupT.js";import{_ as ye}from"./Input.vue_vue_type_script_setup_true_lang-BYzMHQE9.js";import{_ as $e}from"./Label.vue_vue_type_script_setup_true_lang-BI4_AY6J.js";const he={class:"relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:cursor-pointer hover:bg-accent focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"},we={type:"button"},De={key:0},Ue={key:1},Ve={class:"flex flex-col py-4"},Ce={__name:"ReportUserForm",props:{user:Object},setup(e){const g=e,{visible:l,hideDialog:$}=me(),f=I(l),c=F({reported_id:g.user.id,reason:""}),i=()=>{c.post(route("report.user"),{onSuccess:()=>{$(),c.reset()}})};return(u,r)=>{const d=Y,y=ee,h=ne,w=ue,D=se,U=ae,V=x,v=oe,B=te,M=le;return t(),b(M,{open:a(f),"onUpdate:open":r[1]||(r[1]=C=>T(f)?f.value=C:null)},{default:s(()=>[n(d,{"as-child":""},{default:s(()=>[p("div",he,[n(a(_e),{class:"mr-2 h-4 w-4"}),p("button",we,[e.user.username.length<25?(t(),m("span",De,o(u.__("Report")+" @"+e.user.username),1)):(t(),m("span",Ue,o(u.__("Report")+" @"+e.user.username.substring(0,20)+".."),1))])])]),_:1}),n(B,{class:"sm:max-w-md"},{default:s(()=>[p("form",{onSubmit:S(i,["prevent"])},[n(D,null,{default:s(()=>[n(y,null,{default:s(()=>[_(o(u.__("Report")),1)]),_:1}),n(w,{asChild:""},{default:s(()=>[n(h)]),_:1})]),_:1}),p("div",Ve,[n(U,{modelValue:a(c).reason,"onUpdate:modelValue":r[0]||(r[0]=C=>a(c).reason=C),id:"reason",rows:5,errorMessage:a(c).errors.reason,label:u.__("Reason"),placeholder:u.__("Why would like to report this user?")},null,8,["modelValue","errorMessage","label","placeholder"])]),n(v,null,{default:s(()=>[n(V,{type:"submit",disabled:a(c).processing||!a(c).isDirty},{default:s(()=>[_(o(u.__("Submit")),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])}}},Ae={class:"relative block w-full select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:cursor-pointer hover:bg-accent focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"},Be={key:0,type:"button",class:"block w-full text-left"},Se={key:0},Te={key:1},Me={key:1,type:"button",class:"block w-full text-left"},xe={key:0},Ie={key:1},Re={__name:"UserBlock",props:{blocking:Object},setup(e){const g=R().props.auth.user,l=I(!1),$=()=>{l.value=!0},f=()=>{l.value=!1},c=(i,u)=>{N.post(route("user.utils.block"),{blocking:i.id,user:u.id}),f()};return(i,u)=>{const r=H,d=O,y=q,h=z,w=x,D=E,U=G,V=L;return t(),m(j,null,[p("div",Ae,[p("div",{class:"flex items-center",onClick:u[0]||(u[0]=v=>$())},[n(a(Z),{class:"mr-2 h-4 w-4"}),e.blocking.is_blocked?(t(),m("button",Be,[e.blocking.username.length<25?(t(),m("span",Se,o(i.__("Unblock")+" @"+e.blocking.username),1)):(t(),m("span",Te,o(i.__("Unblock")+" @"+e.blocking.username.substring(0,20)+".."),1))])):(t(),m("button",Me,[e.blocking.username.length<25?(t(),m("span",xe,o(i.__("Block")+" @"+e.blocking.username),1)):(t(),m("span",Ie,o(i.__("Block")+" @"+e.blocking.username.substring(0,20)+".."),1))]))])]),n(V,{open:a(l),"onUpdate:open":u[3]||(u[3]=v=>T(l)?l.value=v:null)},{default:s(()=>[n(U,null,{default:s(()=>[n(y,null,{default:s(()=>[e.blocking.is_blocked?(t(),b(r,{key:0},{default:s(()=>[_(o(i.__("Unblock")+" @"+e.blocking.username),1)]),_:1})):(t(),b(r,{key:1},{default:s(()=>[_(o(i.__("Block")+" @"+e.blocking.username),1)]),_:1})),e.blocking.is_blocked?(t(),b(d,{key:2},{default:s(()=>[_(o(i.__("They will be able to follow you or view your posts and you will see posts or notifications from")+" @"+e.blocking.username),1)]),_:1})):(t(),b(d,{key:3},{default:s(()=>[_(o(i.__("They will not be able to follow you or view your posts, and you will not see posts or notifications from")+" @"+e.blocking.username),1)]),_:1}))]),_:1}),n(D,null,{default:s(()=>[n(h,{onClick:u[1]||(u[1]=v=>l.value=!1)},{default:s(()=>[_(o(i.__("Cancel")),1)]),_:1}),n(w,{onClick:u[2]||(u[2]=S(v=>c(e.blocking,a(g)),["prevent"])),variant:e.blocking.is_blocked?"default":"destructive"},{default:s(()=>[_(o(e.blocking.is_blocked?i.__("Unblock"):i.__("Block")),1)]),_:1},8,["variant"])]),_:1})]),_:1})]),_:1},8,["open"])],64)}}},Fe=re({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:g}){const l=e,f=ge(l,"modelValue",g,{passive:!0,defaultValue:l.defaultValue});return(c,i)=>ie((t(),m("textarea",{"onUpdate:modelValue":i[0]||(i[0]=u=>T(f)?f.value=u:null),class:ce(a(ke)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",l.class))},null,2)),[[de,a(f)]])}}),je={class:"relative block w-full select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:cursor-pointer hover:bg-accent focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50"},Ne={key:0,type:"button",class:"block w-full text-left"},He={key:0},Oe={key:1},qe={key:1,type:"button",class:"block w-full text-left"},ze={key:0},Ee={key:1},Ge={class:"grid gap-4"},Le={class:"grid gap-2"},Ze={class:"flex items-center gap-1"},Qe={class:"grid w-full gap-2"},We={__name:"UserSuspend",props:{suspend:Object},setup(e){const g=e;R().props.auth.user;const l=F({user_id:g.suspend.id,suspended_until:1,suspended_reason:""}),$=()=>{l.post(route("user.utils.suspend"),{onSuccess:()=>{l.reset(),u()}})},f=()=>{N.post(route("user.utils.unsuspend",{user_id:g.suspend.id}),{onSuccess:()=>{l.reset()}}),u()},c=I(!1),i=()=>{c.value=!0},u=()=>{c.value=!1};return(r,d)=>{const y=H,h=O,w=q,D=z,U=x,V=E,v=G,B=$e,M=ye,C=ve,Q=Fe,W=L;return t(),m(j,null,[p("div",je,[p("div",{class:"flex items-center",onClick:d[0]||(d[0]=k=>i())},[n(a(Z),{class:"mr-2 h-4 w-4"}),e.suspend.isSuspended?(t(),m("button",Ne,[e.suspend.username.length<25?(t(),m("span",He,o(r.__("Unsuspend")+" @"+e.suspend.username),1)):(t(),m("span",Oe,o(r.__("Unsuspend")+" @"+e.suspend.username.substring(0,20)+".."),1))])):(t(),m("button",qe,[e.suspend.username.length<25?(t(),m("span",ze,o(r.__("Suspend")+" @"+e.suspend.username),1)):(t(),m("span",Ee,o(r.__("Suspend")+" @"+e.suspend.username.substring(0,20)+".."),1))]))])]),n(W,{open:a(c),"onUpdate:open":d[7]||(d[7]=k=>T(c)?c.value=k:null)},{default:s(()=>[e.suspend.isSuspended?(t(),b(v,{key:0},{default:s(()=>[n(w,null,{default:s(()=>[n(y,null,{default:s(()=>[_(o(r.__("Unsuspend")+" @"+e.suspend.username),1)]),_:1}),n(h,null,{default:s(()=>[_(o(r.__("The user will be unbanned immediately and will be able to interact with the website")),1)]),_:1})]),_:1}),n(V,null,{default:s(()=>[n(D,{onClick:d[1]||(d[1]=k=>c.value=!1)},{default:s(()=>[_(o(r.__("Cancel")),1)]),_:1}),n(U,{onClick:d[2]||(d[2]=S(k=>f(e.suspend),["prevent"])),disabled:a(l).processing},{default:s(()=>[_(o(r.__("Unsuspend")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):(t(),b(v,{key:1},{default:s(()=>[n(w,null,{default:s(()=>[n(y,null,{default:s(()=>[_(o(r.__("Suspend")+" @"+e.suspend.username),1)]),_:1}),n(h,null,{default:s(()=>[p("div",Ge,[p("div",Le,[n(B,{for:"suspended_until"},{default:s(()=>[_(o(r.__("Suspension date")),1)]),_:1}),p("div",Ze,[n(M,{id:"suspended_until",type:"number",class:"block max-w-20",modelValue:a(l).suspended_until,"onUpdate:modelValue":d[3]||(d[3]=k=>a(l).suspended_until=k),required:"",autofocus:""},null,8,["modelValue"]),p("span",null,o(r.__("days")),1)]),n(C,{message:a(l).errors.suspended_until},null,8,["message"])]),p("div",Qe,[n(B,{for:"suspended_reason"},{default:s(()=>[_(o(r.__("Reason for suspension")),1)]),_:1}),n(Q,{id:"suspended_reason",modelValue:a(l).suspended_reason,"onUpdate:modelValue":d[4]||(d[4]=k=>a(l).suspended_reason=k)},null,8,["modelValue"]),n(C,{message:a(l).errors.suspended_reason},null,8,["message"])])])]),_:1})]),_:1}),n(V,null,{default:s(()=>[n(D,{onClick:d[5]||(d[5]=k=>c.value=!1)},{default:s(()=>[_(o(r.__("Cancel")),1)]),_:1}),n(U,{onClick:d[6]||(d[6]=S(k=>$(e.suspend),["prevent"])),disabled:a(l).processing||!a(l).isDirty,variant:"destructive"},{default:s(()=>[_(o(r.__("Suspend")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}))]),_:1},8,["open"])],64)}}},Je={class:"w-9 h-9 flex items-center justify-center group-hover:bg-muted dark:group-hover:bg-muted rounded-full base-transition"},cn={__name:"UserMenu",props:{user:Object},setup(e){const g=R().props.auth.user;return(l,$)=>{const f=K,c=fe,i=be,u=Re,r=Ce,d=P,y=X;return a(g)?(t(),b(y,{key:0,modal:!1},{default:s(()=>[n(f,{class:"group flex items-center"},{default:s(()=>[p("div",Je,[n(a(J),{class:"h-5 w-5 text-foreground"})])]),_:1}),n(d,{class:"min-w-[200px]",align:"end"},{default:s(()=>[n(i,null,{default:s(()=>[e.user.user_can.edit?(t(),b(c,{key:0,href:l.route("user.settings.show",e.user),icon:a(pe)},{default:s(()=>[_(o(l.__("Settings")),1)]),_:1},8,["href","icon"])):A("",!0)]),_:1}),n(i,null,{default:s(()=>[e.user.user_can.block?(t(),b(u,{key:0,blocking:e.user},null,8,["blocking"])):A("",!0),e.user.user_can.ban?(t(),b(We,{key:1,suspend:e.user},null,8,["suspend"])):A("",!0),e.user.user_can.report?(t(),b(r,{key:2,user:e.user},null,8,["user"])):A("",!0)]),_:1})]),_:1})]),_:1})):A("",!0)}}};export{cn as _};
